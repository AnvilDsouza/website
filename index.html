<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Anvil D'Souza — Virtual Portfolio Space</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <!-- A-Frame CDN -->
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <!-- Optional: GLTF model loader helper (already part of A-Frame) -->
  <style>
    /* Basic page reset */
    html,body{margin:0;height:100%;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    /* Overlay panel */
    .overlay {
      position:fixed;
      right:20px;
      top:20px;
      width:360px;
      max-width:calc(100vw - 40px);
      background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(250,250,250,0.95));
      box-shadow:0 10px 30px rgba(0,0,0,0.25);
      border-radius:12px;
      padding:18px;
      z-index:999;
      display:none;
      backdrop-filter: blur(6px);
    }
    .overlay header { display:flex; gap:8px; align-items:center; }
    .overlay h2 { font-size:18px; margin:0; line-height:1.05; }
    .overlay .close { margin-left:auto; background:#eee; border:none; padding:6px 8px; border-radius:8px; cursor:pointer; }
    .overlay img { width:100%; border-radius:8px; margin-top:12px; object-fit:cover; height:160px; }
    .overlay p { font-size:14px; color:#222; margin:12px 0; line-height:1.45; }
    .overlay .actions { display:flex; gap:8px; }
    .overlay .actions a { text-decoration:none; padding:8px 10px; border-radius:8px; background:#0b5cff; color:white; font-weight:600; font-size:14px; display:inline-block; }
    .overlay .meta { font-size:13px; color:#555; margin-top:6px; }
    /* Small hint bubble bottom-left */
    .hint {
      position:fixed; left:14px; bottom:14px; z-index:998;
      background:rgba(0,0,0,0.6); color:white; padding:8px 12px; border-radius:999px; font-size:13px;
    }
    /* Hotspot label style in DOM for accessibility */
    .sr-only { position:absolute; width:1px; height:1px; padding:0; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }
    /* Responsive tweaks */
    @media (max-width:640px){
      .overlay { right:12px; left:12px; top:12px; width:auto; padding:14px; }
      .overlay img { height:120px; }
    }


	
      #bookModal {
        position: fixed;
        top: 5%;
        left: 10%;
        width: 80%;
        height: 90%;
        background: #000000d0;
        display: none;
        z-index: 100;
      }
      #bookModal iframe {
        width: 100%;
        height: 100%;
        border: none;
      }
  </style>
</head>
<body>
  <!-- Overlay (pop-up info card shown when clicking hotspots) -->
  <div id="infoOverlay" class="overlay" role="dialog" aria-modal="true" aria-hidden="true">
    <header>
      <h2 id="overlayTitle">Title</h2>
      <button class="close" id="overlayClose" aria-label="Close">✕</button>
    </header>
    <img id="overlayImage" alt="Visual"/>
    <p id="overlayDescription">Description</p>
    <div class="meta" id="overlayMeta"></div>
    <div class="actions" style="margin-top:12px">
      <a id="overlayPrimary" href="#" target="_blank" rel="noopener">Open</a>
      <a id="overlaySecondary" href="#" target="_blank" rel="noopener" style="background:#222">Download</a>
    </div>
  </div>

  <div class="hint">Navigate: WASD / drag to look • Click glowing hotspots</div>

  <!-- A-Frame Scene -->
  <a-scene background="color: #b3e5fc" embedded>
    <!-- Assets for images / models can be preloaded here -->
    <a-assets>
      <!-- Replace these placeholders with your own images -->
      <img id="img-about" src="C:\Users\P3005018\OneDrive - Corporate\Personal\AI PM\img\AI_PM.png?q=80&w=1400&auto=format&fit=crop&ixlib=rb-4.0.3&s=2d7b9357d1b8eb8af0c6b4b8ecb3b7a9" crossorigin="anonymous">
      <img id="img-case" src="C:\Users\P3005018\OneDrive - Corporate\Personal\AI PM\img\AI_PM.png?q=80&w=1400&auto=format&fit=crop&ixlib=rb-4.0.3&s=4b4d3f2b1d5c8c2f729a7b4ea8f3e3d9" crossorigin="anonymous">
      <img id="img-comic" src="C:\Users\P3005018\OneDrive - Corporate\Personal\AI PM\img\AI_PM.png?q=80&w=1400&auto=format&fit=crop&ixlib=rb-4.0.3&s=6f3d3b7a9a4f8f3c9f2b8c5d5e6f7a1b" crossorigin="anonymous">
    </a-assets>

    <!-- Lights & environment -->
    <a-entity light="type: ambient; intensity: 0.8"></a-entity>
    <a-entity light="type: directional; intensity:1" position="0 10 5"></a-entity>

    <!-- Ground -->
    <a-plane rotation="-90 0 0" width="80" height="80" color="#e6f2ff" static-body></a-plane>

    <!-- Decorative Models (simple boxes/plates as pedestals) -->
    <a-box position="-4 0.5 -6" depth="1.5" height="0.5" width="3" color="#ffffff" material="metalness:0.2; roughness:0.6"></a-box>
    <a-box position="0 0.5 -8" depth="1.5" height="0.5" width="3" color="#ffffff" material="metalness:0.2; roughness:0.6"></a-box>
    <a-box position="4 0.5 -6" depth="1.5" height="0.5" width="3" color="#ffffff" material="metalness:0.2; roughness:0.6"></a-box>

    <!-- Hotspots: spheres that are clickable. Update data-* to change content -->
    <a-entity id="hotspots">
      <a-sphere class="hotspot"
                position="-4 1.2 -6"
                radius="0.28"
                color="#ff6b35"
                emissive="#ff6b35"
                emissiveIntensity="0.6"
                shader="flat"
                animation="property: scale; dir: alternate; dur:1000; easing: easeInOutSine; loop: true; to: 1.15 1.15 1.15"
                data-title="About — Anvil D'Souza"
                data-image="#img-about"
                data-desc="Director of Product & AI. I help businesses build regulated, revenue-focused AI products and scale teams. Download my one-pager CV or read my latest newsletter."
                data-primary="https://www.linkedin.com/in/anvildsouza" 
                data-primary-text="LinkedIn"
                data-secondary="https://example.com/Anvil_CV_OnePage.pdf"
                data-secondary-text="Download CV">
      </a-sphere>

      <a-sphere class="hotspot"
                position="0 1.2 -8"
                radius="0.28"
                color="#0b5cff"
                emissive="#0b5cff"
                emissiveIntensity="0.5"
                animation="property: scale; dir: alternate; dur:1100; easing: easeInOutSine; loop: true; to: 1.18 1.18 1.18"
                data-title="Featured Case Study — Scale AI Insights"
                data-image="#img-case"
                data-desc="Led an AI & Analytics team to build a production sales-intelligence layer. Scaled from 2→20 people, reduced model latency 4x, and raised ARR by 12%."
                data-primary="https://example.com/case-study"
                data-primary-text="Read Case Study"
                data-secondary="https://example.com/case-study-download.pdf"
                data-secondary-text="Download PDF">
      </a-sphere>

      <a-sphere class="hotspot"
                position="4 1.2 -6"
                radius="0.28"
                color="#19a974"
                emissive="#19a974"
                emissiveIntensity="0.5"
                animation="property: scale; dir: alternate; dur:1200; easing: easeInOutSine; loop: true; to: 1.2 1.2 1.2"
                data-title="AI PM Diaries — Comic Gallery"
                data-image="#img-comic"
                data-desc="AI PM Diaries: a comic strip series that distills product leadership lessons into bite-sized, shareable stories. Click to view the archive."
                data-primary="https://your-site.com/ai-pm-diaries"
                data-primary-text="Open Comics"
                data-secondary="https://your-site.com/ai-pm-diaries.zip"
                data-secondary-text="Download All">
      </a-sphere>
    </a-entity>

    <!-- Camera rig: WASD controls + mouse look + cursor for clicking -->
    <a-entity id="rig" position="0 1.6 4">
      <a-entity camera look-controls wasd-controls>
        <!-- cursor supports both mouse and gaze -->
        <a-entity cursor="rayOrigin: mouse" raycaster="objects: .hotspot" 
                  position="0 0 -1" geometry="primitive: ring; radiusInner: 0.007; radiusOuter: 0.012"
                  material="color: #111; shader: flat">
        </a-entity>
      </a-entity>
    </a-entity>
  </a-scene>

  <!-- Interactivity script -->
  <script>
    (function () {
      const overlay = document.getElementById('infoOverlay');
      const overlayTitle = document.getElementById('overlayTitle');
      const overlayImage = document.getElementById('overlayImage');
      const overlayDescription = document.getElementById('overlayDescription');
      const overlayPrimary = document.getElementById('overlayPrimary');
      const overlaySecondary = document.getElementById('overlaySecondary');
      const overlayMeta = document.getElementById('overlayMeta');
      const overlayClose = document.getElementById('overlayClose');

      // Utility: resolve asset (if data-image references an asset id like '#img-case')
      function resolveImageRef(ref) {
        if (!ref) return '';
        // if ref begins with '#' try to find in DOM assets
        if (ref.trim().startsWith('#')) {
          const el = document.querySelector(ref.trim());
          if (el && el.src) return el.src;
        }
        return ref;
      }

      // Attach click handlers for A-Frame hotspot entities
      const hotspots = document.querySelectorAll('.hotspot');
      hotspots.forEach(h => {
        // Add accessible label
        const label = document.createElement('span');
        label.className = 'sr-only';
        label.innerText = h.getAttribute('data-title') || 'Hotspot';
        h.appendChild(label);

        // Add listener for 'click' event
        h.addEventListener('click', function (evt) {
          const t = this.getAttribute('data-title') || 'Item';
          const imgRef = this.getAttribute('data-image') || '';
          const desc = this.getAttribute('data-desc') || '';
          const primary = this.getAttribute('data-primary') || '#';
          const primaryText = this.getAttribute('data-primary-text') || 'Open';
          const secondary = this.getAttribute('data-secondary') || '#';
          const secondaryText = this.getAttribute('data-secondary-text') || 'Download';

          overlayTitle.innerText = t;
          overlayImage.src = resolveImageRef(imgRef) || '';
          overlayDescription.innerText = desc;
          overlayPrimary.href = primary;
          overlayPrimary.innerText = primaryText;
          overlaySecondary.href = secondary;
          overlaySecondary.innerText = secondaryText;
          overlayMeta.innerText = 'Click outside the scene to keep reading — close to return to the virtual space.';

          overlay.style.display = 'block';
          overlay.setAttribute('aria-hidden', 'false');

          // Pause look-controls (optional): remove pointer lock to avoid weird focus
          const camera = document.querySelector('[camera]');
          if (camera && camera.components && camera.components['look-controls']) {
            camera.components['look-controls'].pause();
          }
        });
      });

      // Close overlay
      overlayClose.addEventListener('click', closeOverlay);
      // Clicking overlay background won't close; user must click X

      // small keyboard escape handler
      window.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') closeOverlay();
      });

      function closeOverlay() {
        overlay.style.display = 'none';
        overlay.setAttribute('aria-hidden', 'true');
        // resume look-controls
        const camera = document.querySelector('[camera]');
        if (camera && camera.components && camera.components['look-controls']) {
          camera.components['look-controls'].play();
        }
      }

      // Accessibility: allow clicking hotspot by tapping the visible screen (mobile)
      // A-Frame cursor with rayOrigin: mouse supports touch on mobile browsers normally.

      // Helpful console hint for editing
      console.info('Virtual Portfolio Space ready. Edit hotspots in the HTML: <a-sphere class="hotspot" data-title="..." data-desc="...">');
    })();
  </script>

<!-- 1️⃣ Place this entire block inside your Wix “Embed HTML” element -->
<div id="bookshelf"></div>

<!-- 2️⃣ Include Three.js and fonts -->
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/loaders/FontLoader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/geometries/TextGeometry.js"></script>

<style>
  #bookshelf {
    width: 100%;
    height: 90vh;
    background: radial-gradient(circle at center, #c4b89b, #8b7355);
    border-radius: 10px;
    overflow: hidden;
  }
  #bookModal {
    position: fixed;
    top: 5%;
    left: 10%;
    width: 80%;
    height: 90%;
    background: #000000d0;
    display: none;
    z-index: 100;
  }
  #bookModal iframe {
    width: 100%;
    height: 100%;
    border: none;
  }
</style>

<!-- 3️⃣ 3D Bookshelf Script -->
<div id="bookModal"><iframe></iframe></div>

    <script type="module">
      import * as THREE from "https://unpkg.com/three@0.160.0/build/three.module.js";
      import { OrbitControls } from "https://unpkg.com/three@0.160.0/examples/jsm/controls/OrbitControls.js";
      import { FontLoader } from "https://unpkg.com/three@0.160.0/examples/jsm/loaders/FontLoader.js";
      import { TextGeometry } from "https://unpkg.com/three@0.160.0/examples/jsm/geometries/TextGeometry.js";

      const books = [
        ["The AI PM Diaries - MVP", "https://g.co/gemini/share/6d40c85b519e"],
        ["The Ever-Expanding Horizon", "https://g.co/gemini/share/eab63c35d766"],
        ["99% Accuracy, 0% Adoption", "https://g.co/gemini/share/d6a7388e02d7"],
        ["Hello, I’m The Data (and I Have Issues)", "https://g.co/gemini/share/de6cbdfa3fa8"],
        ["The A/B Test That Became A–Z", "https://g.co/gemini/share/63eb6d03df5a"],
        ["Explain It Like I’m a Regulator", "https://g.co/gemini/share/b49f85c853e1"],
        ["Prompt Injection Potluck", "https://g.co/gemini/share/a05d20888b74"],
        ["Free Trial to Production (FTTP)", "https://g.co/gemini/share/17e787ac48a5"],
        ["The Drift", "https://g.co/gemini/share/a2d71a5e2b2e"],
        ["The OKR Bermuda Triangle", "https://g.co/gemini/share/2977b1a03727"],
        ["Ethics Board vs. Board Ethics", "https://g.co/gemini/share/967538b4a886"],
        ["Feature-Creep vs. Value-Chop", "https://g.co/gemini/share/20c2102eda4f"],
        ["GDPR Peekaboo", "https://g.co/gemini/share/7ce7d68cd892"],
        ["Vendor Promise, Integration Purgatory", "https://g.co/gemini/share/4d20a65f3042"],
        ["GPU Budget vs. Coffee Budget", "https://g.co/gemini/share/c940840abac1"]
      ];

      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(
        70,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      // Lights
      const ambient = new THREE.AmbientLight(0xffffff, 0.8);
      const point = new THREE.PointLight(0xffffff, 1);
      point.position.set(10, 10, 10);
      scene.add(ambient, point);

      // Shelf
      const shelfGeometry = new THREE.BoxGeometry(20, 0.5, 3);
      const shelfMaterial = new THREE.MeshStandardMaterial({
        color: 0x7b5e3b,
        roughness: 0.8,
      });
      const shelf = new THREE.Mesh(shelfGeometry, shelfMaterial);
      shelf.position.y = -1.5;
      scene.add(shelf);

      // Camera
      camera.position.z = 12;
      camera.position.y = 2;
      const controls = new OrbitControls(camera, renderer.domElement);

      // Books + Labels
      const loader = new FontLoader();
      loader.load(
        "https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",
        (font) => {
          const bookWidth = 0.6;
          const bookHeight = 3;
          const startX = -6;
          const spacing = 0.8;

          books.forEach((book, i) => {
            const geometry = new THREE.BoxGeometry(bookWidth, bookHeight, 1.2);
            const material = new THREE.MeshStandardMaterial({
              color: new THREE.Color(`hsl(${(i * 30) % 360}, 70%, 50%)`),
            });
            const mesh = new THREE.Mesh(geometry, material);
            mesh.position.x = startX + i * spacing;
            mesh.position.y = 0;
            mesh.userData = { url: book[1] };
            scene.add(mesh);

            const textGeo = new TextGeometry(book[0], {
              font: font,
              size: 0.15,
              height: 0.02,
            });
            const textMat = new THREE.MeshBasicMaterial({ color: 0xffffff });
            const textMesh = new THREE.Mesh(textGeo, textMat);
            textMesh.position.set(mesh.position.x - 0.25, 1.6, 0.6);
            textMesh.rotation.y = Math.PI / 2;
            scene.add(textMesh);
          });
        }
      );

      // Interaction
      const raycaster = new THREE.Raycaster();
      const mouse = new THREE.Vector2();

      window.addEventListener("click", (e) => {
        mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
        mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
        raycaster.setFromCamera(mouse, camera);
        const intersects = raycaster.intersectObjects(scene.children);
        if (intersects.length > 0 && intersects[0].object.userData.url) {
          openBook(intersects[0].object.userData.url);
        }
      });

      // Popup logic
      const modal = document.getElementById("bookModal");
      function openBook(url) {
        modal.style.display = "block";
        modal.querySelector("iframe").src = url;
      }
      modal.addEventListener("click", () => {
        modal.style.display = "none";
        modal.querySelector("iframe").src = "";
      });

      // Render loop
      function animate() {
        requestAnimationFrame(animate);
        renderer.render(scene, camera);
      }
      animate();

      window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      });
    </script>



</body>
</html>
